# Credenza Ã— NIST 800-53 Crosswalk

**Updated Compliance Mapping** (as of July 2025)

## Summary
| Status        | Count | Description                                                                  |
|---------------|-------|------------------------------------------------------------------------------|
| Fully Met     | 16    | Controls with verifiable implementation in code and/or delegated to platform |
| Partially Met | 6     | Present, but dependent on config or missing enforcement                      |
| Missing       | 3     | No current support in code or deployment guidance                            |
| Unknown       | 3     | Cannot be assessed without deployment details                                |

## Fully Met Controls
| Control ID | Title                                  | Notes                                                                                                                                                                                                                                                                                                                               |
|------------|----------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `AC-6`     | Least Privilege                        | Credenza enforces least privilege by architectural minimization: there are no privileged roles, admin capabilities, or access tiers within the service. All session state is user-specific and scoped to IDP-granted claims. Authorization logic is explicitly delegated to downstream service consumers.                           |
| `AC-10`    | Concurrent Session Control             | Credenza issues independently scoped sessions per login event, each with a unique UUID4 ID and its own access/refresh token pair. No global session cap is enforced, which aligns with expected behavior for modern identity brokers supporting multiple devices and clients. Revocation and auditing are supported per session.    |
| `AC-11`    | Session Termination                    | Sessions are terminated via explicit token revocation (access + refresh) and through access-time validation checks. Logout triggers `revoke_tokens()` and emits an audit event. Token expiration is checked and enforced during refresh and reuse.                                                                                  |
| `AU-2`     | Audit Events                           | Verified use of `audit_event()` across session lifecycle operations (creation, refresh, expiration, revocation). Audit events include UTC timestamps and structured metadata. Logging is internal to the application and designed for external aggregation.                                                                         |
| `AU-6`     | Audit Review, Analysis, and Reporting  | Audit events are designed for downstream aggregation, structured logging, and filtering. All major lifecycle events are covered.                                                                                                                                                                                                    |
| `AU-8`     | Time Stamps                            | While the Credenza application does not manage clock synchronization itself, it consistently uses `datetime.utcnow()` for all audit events. Clock sync is delegated to the container/host (e.g., NTP).                                                                                                                              |
| `CM-2`     | Baseline Configuration                 | Credenza loads configuration from structured `.env` files with fallback logic. This ensures consistent runtime defaults in containerized and host-based deployments.                                                                                                                                                                |
| `CM-6`     | Configuration Settings                 | Runtime settings are loaded from `CREDENZA_`-prefixed environment variables using Flask's `from_prefixed_env()`. Combined with `.in` file substitution and secrets injection, this supports structured configuration.                                                                                                               |
| `IA-2`     | User Identification and Authentication | Authentication is delegated to trusted OIDC providers. ID tokens are validated using JWKs, and access tokens are introspected. Identity claims are cryptographically validated.                                                                                                                                                     |
| `IA-4`     | Identifier Management                  | User identity is constructed using a composite of the `iss` (issuer) and `sub` (subject) claims. These are persistent and globally unique per identity provider. No local reassignment occurs.                                                                                                                                      |
| `IA-5`     | Authenticator Management               | Credenza does not manage authenticators directly. Authentication is delegated to OIDC providers, and local credentials are never issued or stored.                                                                                                                                                                                  |
| `SA-11`    | Developer Security Testing             | Credenza includes continuous integration (CI) via GitHub Actions with automated testing and coverage tracking. Type checking, and linting are optional but can be added. While static code analysis and dependency scanning could strengthen posture further, the current level meets the minimum for moderate baseline compliance. |
| `SC-12`    | Cryptographic Key Establishment        | Token validation uses OIDC JWKs fetched securely from the provider's metadata. All signature verification is handled using trusted libraries. No local key establishment is needed.                                                                                                                                                 |
| `SC-13`    | Cryptographic Key Management           | Signing keys are managed by the OIDC provider. Optional session encryption uses an AES-GCM codec, with keys provided via deployment config. Credenza never generates or persists cryptographic keys locally.                                                                                                                        |
| `SC-23`    | Session Authenticity                   | Sessions are uniquely identified using UUID4 IDs and are explicitly bound to the authenticated OIDC user. Session reuse is not permitted, and tokens are scoped.                                                                                                                                                                    |
| `SC-28`    | Information at Rest Protection         | Session encryption at rest is implemented using AES-GCM and can be enabled via config. Default deployments may skip this, but full compliance is reachable via configuration.                                                                                                                                                       |

## Partially Met Controls
| Control ID | Title                        | Notes                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|------------|------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `CA-7`     | Continuous Monitoring        | Credenza provides health check and Prometheus metrics endpoints and is compatible with monitoring tools such as Grafana. However, it intentionally does not bundle these tools and leaves observability architecture to the deployer. CA-7 is marked partially met, with full compliance achieved at deployment time.                                                                                                                                              |
| `CM-7`     | Least Functionality          | Credenza has a modular design that allows optional features (e.g., session augmentation, storage backends) to be enabled via configuration. However, there is no enforcement of a minimal runtime profile or validation against a deny-list, so this control is considered partially met based on deployment discipline.                                                                                                                                           |
| `RA-5`     | Vulnerability Scanning       | [Bandit](https://bandit.readthedocs.io/en/latest/index.html) has been tested but is not yet integrated into CI/CD pipelines. Evaluation is in-progress as a mechanism for achieving full compliance.                                                                                                                                                                                                                                                               |
| `SI-4`     | System Monitoring            | Credenza includes structured telemetry and audit logging suitable for external monitoring. However, it lacks built-in anomaly detection, abuse heuristics, and automated alerting. Full compliance depends on deployment-layer observability and threat response tools.                                                                                                                                                                                            |
| `SI-10`    | Input Validation             | Basic input validation is present in major authentication and session flows (e.g., OIDC callback, token refresh). However, validation is not comprehensive across all input surfaces, and failures are not consistently logged or auditable. This supports partial fulfillment of SI-10, with room for structured improvement.                                                                                                                                     |
| `SC-5`     | Denial of Service Protection | Credenza itself does not currently implement native rate limiting or abuse throttling mechanisms. However, it is expected to be deployed behind a reverse proxy (e.g., Traefik or nginx), which is responsible for applying DoS protections such as connection limits, timeouts, and rate limiting. If such infrastructure is properly configured, this control is satisfied at the deployment layer. Otherwise, it is considered missing in the core application. |

## Missing Controls
| Control ID | Title                                  | Notes                                                                                                                                                                                                         |
|------------|----------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `IR-4`     | Incident Handling                      | Credenza emits structured audit logs that could inform incident response, but it does not implement its own detection or response mechanisms. This control is fulfilled by organizational policy and tooling. |
| `MP-5`     | Media Transport Protection             | Credenza does not handle physical or removable media. Session data is transported via HTTPS. Media transport protection is not relevant to its runtime behavior.                                              |
| `PE-19`    | Access Restrictions for Output Devices | Physical/logical separation is out of scope for the application. It relies on hosting infrastructure (cloud or on-premises) to implement access controls and output restrictions.                             |

## Unknown Controls
| Control ID | Title                                             | Notes                                                                                                                                                    |
|------------|---------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|
| `IA-8`     | Identification and Authentication (Non-Org Users) | Credenza delegates trust to external OIDC IDPs and does not distinguish org vs non-org users. Control compliance depends on IDP policies.                |
| `SC-18`    | Mobile Code                                       | Credenza is a backend-only service and does not serve frontend content or mobile code. Not applicable.                                                   |
| `SC-7`     | Boundary Protection                               | Credenza is designed to run behind a reverse proxy or firewall. Network-level boundary protection is expected to be provided by external infrastructure. |
